app
.controller('FilterCtrl',
    function ($scope,$timeout, $http, $state) {
		$scope.user = null;
		$scope.users = null;
		$scope.mode = null;
		$scope.modes = null;
		$http({
		  method: 'GET',
		  url: '/categories.json'
		}).then(function successCallback(response) {
		    $scope.categories =  response.data;
		  }, function errorCallback(response) {
		  });

			$scope.loadUsers = function() 
			{
				return $timeout(function() 
					{
						$scope.users =  $scope.categories
					}, 650);
	 		}

			$scope.loadModes = function() 
			{
				$scope.modes =  $scope.modes  || [
			        { id: 1, name: 'Mayor a menor' },
			        { id: 2, name: 'Menor a' }
			      ];
													
	 		}
	   		
		    $scope.Prueba = function (id) {
				console.log( $scope.user.name);
			};

		    $scope.ReloadState = function (id) {
				
		    	if($scope.name==null)
		    	{
		    		name="all";
		    	}
		    	else
		    	{
				name= $scope.name;
		    	}

				if($scope.user==null)
				{
					category='all'
				}
				else
				{
					category= $scope.user.name;
				}

				if(name=='')
				{
					name='all'
				}

				$state.go("social_needs.filter", { "name": name,"category": category, "filter": "all"},  {});
			};

   		}	


);
