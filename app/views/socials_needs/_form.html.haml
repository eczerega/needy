
%script{:src => "https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"}
%link{:href => "https://rawgit.com/enyo/dropzone/master/dist/dropzone.css", :rel => "stylesheet"}/
.main-slider-need{} 
  = form_for @socials_need, :html => {remote: true }  do |f|
    - if @socials_need.errors.any?
      #error_explanation
        %h2= "#{pluralize(@socials_need.errors.count, "error")} prohibited this socials_need from being saved:"
        %ul
          - @socials_need.errors.full_messages.each do |msg|
            %li= msg


      
    .row
      .col-md-1
      .col-md-5
      .col-md-6
        %div{:style=>"background-color: white; padding:60px 30px; 0px; 30px; width: 100%; "}
          %md-input-container.md-block{"flex-gt-sm" => ""}
            %label Título de la necesidad
            %input{"ng-model" => "user.firstName"}
          %md-input-container.md-block
            %label Descriptión
            %textarea{"md-maxlength" => "250", "md-select-on-focus" => "", "ng-model" => "user.biography", :rows => "10", :style =>"height: 210px"} 
          %md-input-container.md-block{"flex-gt-sm" => ""}
            %label Ubicación
            %input{"ng-model" => "user.firstName"}  

    .field
      = f.text_field :name

    .field
      = f.label :user_id
      = f.text_field :user_id

    .field
      = f.label :description
      = f.text_field :description
    .field
      = f.label :latitude
      = f.text_field :latitude
    .field
      = f.label :longitude
      = f.text_field :longitude
    .field
      = f.label :address
      = f.text_field :address
    .actions
      = f.submit 'Save'
.row
  %form.dropzone#file-dropzone{}

:javascript

    $( document ).ajaxComplete(function() {
      $( ".dropzone" ).submit();
    });
    $.getScript('http://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/dropzone.min.js',function(){
    // instantiate the uploader
    $('#file-dropzone').dropzone({ 
      url: "/upload",
      maxFilesize: 100,
      paramName: "uploadfile",
      maxThumbnailFilesize: 5,
      init: function() {
        
        this.on('success', function(file, json) {
        });
        
        this.on('addedfile', function(file) {
          
        });
        
        this.on('drop', function(file) {
          alert('file');
        }); 
      }
    });
  });

  $(document).ready(function() {});